{
  "width": "[width]",
  "height": "[height]",
  "x": 120,

  "data": "[dataDefinition]",
  "networks": "[networksDefinition]",

  "parameters": [
    {
      "name": "seriationMethod",
      "bind": {
        "input": "select",
        "options": [
          "optimal-leaf-order",
          "barycentre",
          "bandwidth-reduction",
          "pca",
          "degree_order"
        ],
        "labels": [
          "Optimal Leaf Order",
          "Barycentre Heuristic",
          "Bandwidth Reduction",
          "PCA",
          "Node Degree"
        ],
        "label": "Seriation"
      },
      "value": "barycentre"
    },
    {
      "name": "timeFormat",
      "value": "[timeFormat]"
    },
    {
      "name": "time",
      "bind": {
        "input": "brush",
        "axisType": "time",
        "network": "network",
        "for": "links",
        "field": "data._time"
      }
    },
    {
      "name": "nodeTypeInShape",
      "value": "[nodeTypeInShape]"
    },
    {
      "name": "selected_marks",
      "network": "network",
      "action": "replace",
      "type": "selection",
      "clearOnBackgroundClick": true
    }
  ],

  "orderings": [
    {
      "name": "staticOrder",
      "orderBy": {"parameter": "seriationMethod"},
      "data": "staticNetwork.nodes"
    }
  ],

  "layouts": [
      {
        "name": "layout",
        "data": "network.nodes",
        "pattern": "cartesian",
        "x": [{ "scale": "time", "field": "data._time" }],
        "y": [{ "order": "staticOrder", "field": "data.name" }],
        "positioning": "none"
      },
       {
        "name": "staticLayout",
        "data": "staticNetwork.nodes",
        "order": "staticOrder",
        "pattern": "linear",
        "orientation": "vertical"
      }
  ],


  "scales": [
        {
          "name": "time",
          "type": "time",
          "range": [
            50,
            500
          ],
          "domain": {
            "data": "network.nodes",
            "field": "data._time"
          }
        },
        {
          "name": "radius",
          "type": "linear",
          "range": [
            10,
            200
          ],
          "domain": {
            "data": "network.nodes",
            "field": "degree"
          }
        },
        {
          "name": "nodeShape",
          "type": "ordinal",
          "range": "[nodeTypeShapeScheme]",
          "domain": {
            "data": "network.nodes",
            "field": "data.type0"
          }
        },
        {
          "name": "nodeColor",
          "type": "linear",
          "scheme": "reds",
          "domain": {
            "data": "network.nodes",
            "field": "degree"
          }
        },
        {
          "name": "edgeColor",
          "type": "ordinal",
          "range": "[colorScheme]",
          "domain": {
            "data": "network.links",
            "field": "linkType"
          }
        },
        {
          "name": "edgeWidth",
          "type": "linear",
          "range": [
            1.2,
            3
          ],
          "domain": {
            "data": "network.links",
            "field": "linkWeight"
          }
        },
        {
          "name": "edgeOpacity",
          "type": "linear",
          "range": [
            0.2,
            0.8
          ],
          "domain": {
            "data": "network.links",
            "field": "linkWeight"
          }
        }
  ],

"vis": [
    {
      "entries": "staticNetwork.nodes",
      "layout": "staticLayout",
      "mark": {
        "type": "text",
        "text": { "expression": "datum.id"},
        "align": "right",
        "dx": -15,
        "fontSize": 6
      }
    },
    {
      "entries": "network.links",
      "layout": "layout",
      "drawAxes": true,
      "mark": {
        "type": "linkpath",
        "start": "source",
        "end": "target",
        "shape": "curveSymmetric",
        "parallelLinksType": "curve",
        "stroke": {
          "conditions": [
            {
              "test": "!params.nodeTypeInShape",
              "value": "grey"
            }
          ],
          "field": "linkType",
          "scale": "edgeColor"
        },
        "directionForShape": {
          "ordering": "staticOrder"
        },
        "strokeWidth": 1,
        "strokeOpacity": {
          "conditions": [
            {
              "selectionIsEmpty": "selected_marks.nodes",
              "value": 0.3
            },
            {
              "inSelection": "selected_marks.links",
              "value": 1
            }
          ],
          "value": 0.3
        }
      }
    },
    {
      "entries": "network.nodes",
      "layout": "layout",
      "actions": [
        {
          "interaction": "select",
          "using": "[selectType]",
          "action": "replace",
          "selection": "selected_marks"
        }
      ],
      "mark": {
        "type": "circle",
        "area": { "field": "degree", "scale": "radius" },
        "fill": "black",
        "stroke": "white",
        "opacity": {
          "conditions": [
            {
              "selectionIsEmpty": "selected_marks.nodes",
              "value": 1
            },
            {
              "inSelection": "selected_marks.nodes",
              "value": 1
            }
          ],
          "value": 0.1
        },
        "tooltip": { "expression": "datum.id"}
      }
    }
  ]
}