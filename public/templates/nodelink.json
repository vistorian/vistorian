{
  "pan": {"modifierKeyRequired": [ ]},
  "zoom": true,

  "data": "[dataDefinition]",
  "networks": "[networksDefinition]",

  "parameters": [
    {
      "name": "select_node",
      "action": "replace",
      "network": "network",
      "type": "selection"
    }
  ],

  "layouts": [
    {
      "name": "layout",
      "network": "network",
      "type": "d3-force"
    }
  ],

  "scales": [
    {
      "name": "radius",
      "type": "linear",
      "range": [10, 280],
      "domain": { "data": "network.nodes", "field": "degree" }
    },
    {
      "name": "nodeColor",
      "type": "linear",
      "scheme": "reds",
      "domain": { "data": "network.nodes", "field": "degree" }
    },
    {
      "name": "edgeColor",
      "type": "ordinal",
      "scheme": "category20",
      "domain": {
        "data": "network.links",
        "field": "linkType"
      }
    }
  ],

  "vis": [
    {
      "entries": "network.links",
      "layout": "layout",
      "mark": {
        "type": "linkpath",
        "start": "source",
        "end": "target",
        "stroke": {
          "field": "linkType",
          "scale": "edgeColor"
        },
        "strokeWidth": 1
      }
    },
    {
      "entries": "network.nodes",
      "ifInSelection": "select_node.nodes",
      "layout": "layout",
      "mark": {
        "type": "circle",
        "area": 600,
        "fill": "gold"
      },
      "actions": [
        {
          "interaction": "select",
          "using": "cursor",
          "event": "click",
          "action": "toggle",
          "selection": "select_node",
          "clearOnBackgroundClick": true
        }
      ]
    },
    {
      "entries": "network.nodes",
      "layout": "layout",
      "mark": {
        "type": "circle",
        "area": {
          "field": "degree",
          "scale": "radius"
        },
        "fill": {
          "field": "degree",
          "scale": "nodeColor"
        },
        "tooltip": {
          "expression": "datum.id + ' (degree ' + datum.degree + ')' "
        }
      }
    },
    {
      "entries": "network.nodes",
      "layout": "layout",
      "mark": {
        "type": "text",
        "text": {"expression": "datum.degree > 20 ? datum.id : null "}
      }
    }
  ]
}