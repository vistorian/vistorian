name: Deploy Vistorian 2.0 # name for your action

on:
  push: 
    branches:   #  Set a branch name to trigger action
      - master
    # paths:
    #   - dist/**
  # pull_request:  # perform action after pr

jobs:
  deploy:
    runs-on: ubuntu-latest   # action perform environment
    concurrency: ci-${{ github.ref }}
    steps: 
      - name: Checkout ğŸ›ï¸
        uses: actions/checkout@v3

      - name: Install and Build ğŸ”§ # This example project is built using npm and outputs the result to the 'build' folder. Replace with the commands required to build your project, or remove this step entirely if your site is pre-built.
        run: |
          npm ci
          npm run build

      - name: Deploy ğŸš€
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          folder: dist     # publicDir in your source private code
          token: ${{ secrets.TOKEN_VISTORIAN }}   # deploy key 
          repository-name: shuxinhuan/vistorian2.0_dev   # public repo
          branch: main    # branch in your public repo